
# Управление заказами для онлайн-магазина

Приложение разработано для управления заказами в онлайн-магазине. Оно реализует MVC-архитектуру с RESTful API для работы с сущностями: Продукт, Покупатель и Заказ. Приложение использует `ObjectMapper` для преобразования объектов в JSON и обратно.

## Функциональность

Приложение предоставляет следующие возможности:
- **Управление продуктами**:
    - Получение списка всех продуктов.
    - Получение информации о конкретном продукте.
    - Создание нового продукта.
    - Обновление информации о продукте.
    - Удаление продукта.

- **Управление заказами**:
    - Оформление нового заказа.
    - Получение информации о конкретном заказе.

## Сущности

1. ### Продукт (Product)
   Содержит информацию о продукте.
    - `productId`: идентификатор продукта (Long).
    - `name`: название продукта (String).
    - `description`: описание продукта (String).
    - `price`: цена продукта (BigDecimal).
    - `quantityInStock`: количество на складе (Integer).

2. ### Покупатель (Customer)
   Представляет покупателя, размещающего заказ.
    - `customerId`: идентификатор покупателя (Long).
    - `firstName`: имя покупателя (String).
    - `lastName`: фамилия покупателя (String).
    - `email`: адрес электронной почты (String).
    - `contactNumber`: контактный номер телефона (String).

3. ### Заказ (Order)
   Представляет заказ покупателя.
    - `orderId`: идентификатор заказа (Long).
    - `customer`: объект `Customer`, связанный с заказом.
    - `products`: список продуктов в заказе (List<Product>).
    - `orderDate`: дата заказа (LocalDateTime).
    - `shippingAddress`: адрес доставки (String).
    - `totalPrice`: общая стоимость заказа (BigDecimal).
    - `orderStatus`: статус заказа (OrderStatus - Enum с возможными статусами).

## API эндпоинты

1. **Продукты**:
    - `GET /api/products`: Возвращает список всех продуктов.
    - `GET /api/products/{id}`: Возвращает информацию о конкретном продукте.
    - `POST /api/products`: Создаёт новый продукт (принимает JSON-объект).
    - `PUT /api/products/{id}`: Обновляет информацию о продукте.
    - `DELETE /api/products/{id}`: Удаляет продукт.

2. **Заказы**:
    - `POST /api/orders`: Создаёт новый заказ (принимает JSON-объект).
    - `GET /api/orders/{id}`: Возвращает информацию о конкретном заказе.

## Использование ObjectMapper

Приложение использует `ObjectMapper` для:
- Преобразования объектов `Product`, `Customer`, и `Order` в JSON-формат для ответа API.
- Преобразования JSON-данных, полученных от пользователя, в объекты `Product` и `Order` для обработки.

## Обработка ошибок и валидация

В приложении предусмотрена валидация и обработка ошибок:
- Валидация обязательных полей, формата данных, допустимого значения полей.
- Обработка ошибок с возвращением соответствующих HTTP-статусов:
    - `400 Bad Request`: Некорректные данные или отсутствуют обязательные поля.
    - `404 Not Found`: Продукт или заказ не найден.
    - `500 Internal Server Error`: Внутренняя ошибка сервера.

## Технологии

- **Java 17**
- **Spring Boot 3**
- **Spring Data JPA**: для работы с базой данных.
- **ObjectMapper** из библиотеки `Jackson`: для работы с JSON.
- **H2 Database** (встроенная БД для тестирования)
- **Spring Validation**: для валидации данных.

## Установка и запуск

1. Склонируйте репозиторий:
   ```bash
   git clone https://github.com/your-username/online-store-management.git
   ```
2. Перейдите в каталог проекта:
   ```bash
   cd online-store-management
   ```
3. Соберите и запустите приложение с помощью Maven:
   ```bash
   mvn spring-boot:run
   ```
4. Приложение будет доступно по адресу `http://localhost:8080`.

## Примеры JSON запросов

1. **Создание продукта**
   ```json
   POST /api/products
   {
       "name": "Лаптоп",
       "description": "Мощный и легкий ноутбук",
       "price": 1500.00,
       "quantityInStock": 20
   }
   ```

2. **Создание заказа**
   ```json
   POST /api/orders
   {
       "customer": {
           "firstName": "Иван",
           "lastName": "Иванов",
           "email": "ivan@example.com",
           "contactNumber": "+79123456789"
       },
       "products": [
           {
               "productId": 1
           },
           {
               "productId": 2
           }
       ],
       "shippingAddress": "ул. Пушкина, д. 10",
       "orderStatus": "PENDING"
   }
   ```

## Лицензия

Этот проект доступен под лицензией MIT.